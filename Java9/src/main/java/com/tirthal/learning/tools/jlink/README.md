# The jlink Tool

Jlink is Java’s new command line tool which allows you to link sets of modules (and their transitive dependencies) to create a run-time image

In short, simplify and reduce the size of deployment using the jlink tool. 

## Usage Guide

* Command to invoke the linker tool: 

    * `jlink --module-path <modulepath> --add-modules <modules> --limit-modules <modules> --output <path>`
    
        This command creates a run-time image which only has the modules that our application needs, but not the ones we don’t.               
        
        "--module-path" specifies where to find the modules for the JDK. These can be jar files, jmod files (a new file format with JDK 9 which is similar to the jar format but can handle native code and configuration files among other things) or exploded modules.
        
        "–-add-modules" adds the modules we need
        
        "–-limit-modules" limits to just the modules that we know our application needs (sometimes when modules are added, further modules can be added via transitive dependencies. Here we can specify that we only want certain modules)
        
        "–-output" is this directory where the run-time image will be
    
    * `jlink --help` shows possible options for jlink command.       
    
## Try it

For example, let's use jlink for HelloWorld Modules on windows [(1)](https://github.com/tirthalpatel/Learning-Java/tree/master/Java9/modules.com.hello) and [(2)](https://github.com/tirthalpatel/Learning-Java/tree/master/Java9/modules.com.hello.client)

* Go to "Java9" directory: `cd <xxx>\Learning-Java\Java9` 
* Create "jlink-runtime" output directory to include the "modules.com.hello.client" module, and all of the modules it (directly or indirectly) depends on.

    `jlink --module-path %JAVA_HOME%\jmods;out\production --add-modules modules.com.hello.client --output jlink-runtime --launcher launch=modules.com.hello.client/modules.com.hello.client.HelloWorldClient`
    
* Go to "jlink-runtime" directory: `cd <xxx>\Learning-Java\Java9\jlink-runtime\bin` 
* Run "HelloWorldClient" using java: `java -m modules.com.hello.client/modules.com.hello.client.HelloWorldClient`
* Run "HelloWorldClient" using launch script (generated by --launcher option in jlink): `launch`
* See "release" file in "jlink-runtime" folder.
    
## Also See

* [Using jlink to Build Java Runtimes for non-Modular Applications](https://medium.com/azulsystems/using-jlink-to-build-java-runtimes-for-non-modular-applications-9568c5e70ef4)